# =============================================================================
# PRONEXMA PROTOCOL - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your values
# cp .env.example .env

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------

# Backend server port
PORT=4000

# Node environment (development, production, test)
NODE_ENV=development

# Log level (debug, info, warn, error)
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------

# SQLite database path (relative to backend directory)
DATABASE_URL=file:./dev.db

# -----------------------------------------------------------------------------
# QUBIC NETWORK CONFIGURATION
# -----------------------------------------------------------------------------

# Network mode determines how the backend connects to Qubic
# Options:
#   LOCAL_DEV      - Connect to local Qubic Core Lite + RPC
#   PUBLIC_TESTNET - Connect to public testnet RPC endpoint
#   DEMO_OFFCHAIN  - No RPC connection, fully simulated
NETWORK_MODE=LOCAL_DEV

# RPC endpoint URL
# For LOCAL_DEV: http://localhost:8080 or http://qubic-rpc:8080 (in Docker)
# For PUBLIC_TESTNET: https://testnet-rpc.qubicdev.com (may be unreliable)
RPC_URL=http://localhost:8080

# Force demo mode even if RPC is available
# Set to true for hackathon demos without Qubic infrastructure
DEMO_MODE=false

# RPC connection timeout in milliseconds
RPC_TIMEOUT_MS=5000

# Number of RPC retries before falling back to demo mode
RPC_RETRY_COUNT=3

# -----------------------------------------------------------------------------
# ORACLE CONFIGURATION
# -----------------------------------------------------------------------------

# Private key for the Oracle Admin wallet
# Used to sign milestone verification transactions
# In production, use a secure key management solution
# For demo mode, this can be any string
ORACLE_PRIVATE_KEY=demo-oracle-key-replace-in-production

# Oracle admin wallet address (derived from private key)
# Leave empty to auto-derive from private key
ORACLE_ADDRESS=

# -----------------------------------------------------------------------------
# CORS & SECURITY
# -----------------------------------------------------------------------------

# Frontend URL for CORS configuration
FRONTEND_URL=http://localhost:3000

# Session secret for JWT tokens
# Generate with: openssl rand -base64 32
SESSION_SECRET=replace-with-random-secret-in-production

# Session expiry in seconds (default: 24 hours)
SESSION_EXPIRY_SECONDS=86400

# -----------------------------------------------------------------------------
# DEMO WALLETS
# -----------------------------------------------------------------------------
# Pre-configured wallets for demo mode
# These simulate funded wallets for testing

DEMO_WALLET_INVESTOR=QUBIC_DEMO_INVESTOR_ADDRESS_AAAA
DEMO_WALLET_BENEFICIARY=QUBIC_DEMO_BENEFICIARY_ADDRESS_BBBB
DEMO_WALLET_ORACLE=QUBIC_DEMO_ORACLE_ADDRESS_CCCC

# Demo wallet balances (in QU)
DEMO_WALLET_INVESTOR_BALANCE=10000000
DEMO_WALLET_BENEFICIARY_BALANCE=0
DEMO_WALLET_ORACLE_BALANCE=1000000

# -----------------------------------------------------------------------------
# WEBHOOK CONFIGURATION
# -----------------------------------------------------------------------------

# Webhook secret for validating incoming webhook payloads
# Used with HMAC signature verification
WEBHOOK_SECRET=your-webhook-secret-here

# Allowed webhook sources (comma-separated)
WEBHOOK_ALLOWED_SOURCES=github,gitlab,jira,zapier,manual

# -----------------------------------------------------------------------------
# PROTOCOL CONFIGURATION
# -----------------------------------------------------------------------------

# Protocol fee percentage (basis points, 50 = 0.5%)
PROTOCOL_FEE_BPS=50

# Maximum milestones per agreement
MAX_MILESTONES=10

# Refund timeout in ticks (Qubic time units)
# Default: ~30 days worth of ticks
REFUND_TIMEOUT_TICKS=1000000

# -----------------------------------------------------------------------------
# FRONTEND CONFIGURATION (Next.js)
# -----------------------------------------------------------------------------

# Public API URL (accessible from browser)
NEXT_PUBLIC_API_URL=http://localhost:4000

# Network display name
NEXT_PUBLIC_NETWORK_NAME=Qubic Testnet

# Enable/disable features
NEXT_PUBLIC_ENABLE_REAL_WALLET=false
NEXT_PUBLIC_ENABLE_DEMO_MODE=true
